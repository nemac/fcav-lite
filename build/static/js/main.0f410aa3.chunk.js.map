{"version":3,"sources":["nemac_logo_white.png","nemac_logo_black.png","forwarn2-legend.png","config.js","datemanagement.js","themeswitcher.js","light.js","dark.js","CustomThemeProvider.js","fcav.js","index.js"],"names":["module","exports","config","datestring","index","baseUrl","options","layers","format","transparent","tileSize","uppercase","opacity","leafletLayer","name","url","attribution","layer","theme","toDate","julianDay","year","parseInt","monthIndex","dayCount","isLeapYear","i","length","day","Date","toWMSDate","dateObj","toHyphenate","String","getFullYear","month","getMonth","getDate","getNextFWDate","startDate","datesForYear","juliandates","map","jd","prototype","this","getDOY","mn","dn","dayOfYear","themes","light","createMuiTheme","palette","primary","main","secondary","error","red","A400","background","default","appBar","contrastText","nemacLogo","dark","type","CustomThemeContext","React","createContext","currentTheme","setTheme","CustomThemeProvider","props","children","localStorage","getItem","useState","themeName","_setThemeName","getTheme","contextValue","setItem","Provider","value","ThemeProvider","Chart","register","annotationPlugin","center","useStateWithLabel","initialValue","setValue","useDebugValue","rootElement","document","getElementById","ReactDOM","render","useCompare","val","ref","useRef","useEffect","current","usePrevious","useContext","darkMode","setDarkMode","classes","makeStyles","root","width","modal","display","alignItems","justifyContent","paper","position","color","height","boxShadow","padding","useStyles","animating","graphOn","setGraphOn","mapHeight","setMap","handleGraphOpen","mapContainer","querySelector","style","setProperty","invalidateSize","labels","coordinates","datasets","label","data","fill","backgroundColor","borderColor","xAxisID","modisData","setModisData","maintainAspectRatio","plugins","annotation","annotations","drawTime","mode","scaleID","borderWidth","content","enabled","scales","yAxes","ticks","beginAtZero","steps","stepValue","max","fontColor","modisDataConfig","setStartDate","endDate","setEndDate","dateRangeIndex","setDateRangeIndex","hasDateRangeIndexChanged","basemaps","baseLayers","basemapIndex","setBasemapIndex","basemapRef","hasBaseMapChanged","productIndex","setProductIndex","hasProductIndexChanged","productsList","getWMSLayersYearRange","wmsLayers","setWmsLayers","themesList","themeIndex","setThemeIndex","isInitialRender","setIsInitialRender","onStartDateChange","date","toString","newLayerRange","onEndDateChange","onBasemapChange","event","target","onThemeChange","onProductChange","newProduct","onSliderChange","e","v","console","log","productIdx","tempDate","wmsdate","o","wms_template","L","tileLayer","wms","push","setDate","getChartData","lat","long","a","fetchChartData","then","response","mugl","parsedData","parseValuesToInts","values","newModisData","parseDatesToString","verticalaxis","title","fetch","text","textResponse","parse","catch","dataArr","split","dataSTR","substr","dateArr","dateSTR","GraphBtn","Button","letiant","className","button","startIcon","onClick","GraphData","Box","Typography","variant","align","DateRangePicker","utils","DateFnsUtils","marginRight","disableToolbar","margin","id","onChange","KeyboardButtonProps","marginTop","Slider","defaultValue","aria-labelledby","valueLabelDisplay","step","marks","min","onChangeCommitted","BasemapSelect","FormControl","InputLabel","shrink","Select","labelId","basemap","MenuItem","key","ThemeSelect","chosenTheme","toLowerCase","ProductSelect","product","Grid","container","item","xs","AppBar","zIndex","flexWrap","flexDirection","Toolbar","src","nemacLogoWhite","nemacLogoBlack","alt","MapContainer","whenCreated","on","latlng","lng","zoom","search","geosearch","useMap","clearMap","eachLayer","removeLayer","newBasemap","addLayer","bringToBack","setOpacity","hasLayer","bringToFront","newIndex","timer","setTimeout","clearTimeout","forEach","addTo","legend","control","onAdd","div","DomUtil","create","innerHTML","forwarn2Legend","Control","loading","separate"],"mappings":"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","file":"static/js/main.0f410aa3.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/nemac_logo_white.b9acf019.png\";","module.exports = __webpack_public_path__ + \"static/media/nemac_logo_black.f0b63d98.png\";","module.exports = __webpack_public_path__ + \"static/media/forwarn2-legend.e6734a0a.png\";","const config = {\n  \"juliandates\" : [  \"001\",  \"009\",  \"017\",  \"025\",  \"033\",  \"041\",  \"049\",  \"057\",  \"065\",  \"073\",  \"081\",  \"089\",  \"097\",  \"105\",  \"113\",  \"121\",  \"129\",  \"137\",  \"145\",  \"153\",  \"161\",  \"169\",  \"177\",  \"185\",  \"193\",  \"201\",  \"209\",  \"217\",  \"225\",  \"233\",  \"241\",  \"249\",  \"257\",  \"265\",  \"273\",  \"281\",  \"289\",  \"297\",  \"305\",  \"313\",  \"321\",  \"329\",  \"337\",  \"345\",  \"353\",  \"361\"],\n  \"wms_template\" : function (datestring, index){\n    //from prior year\n    const sampleLayer = [\n      {\n      baseUrl: 'https://fswms.nemac.org/forwarn_compare',\n      options: {\n        layers: `FW_${datestring}_1YR_FW2`,\n        format: 'image/png',\n        transparent: true,\n        tileSize: 2048,\n        uppercase : true,\n        opacity: 0\n      },\n      leafletLayer: \"\"\n    },\n    //early detect\n    {\n      baseUrl: 'https://fswms.nemac.org/forwarn_compare',\n      options: {\n        layers: `FW_${datestring}_ALC_FW2`,\n        format: 'image/png',\n        transparent: true,\n        tileSize: 2048,\n        uppercase : true,\n        opacity: 0\n      },\n      leafletLayer: \"\"\n    },\n    //3 year max\n    {\n      baseUrl: 'https://fswms.nemac.org/forwarn_compare',\n      options: {\n        layers: `FW_${datestring}_3YR_FW2`,\n        format: 'image/png',\n        transparent: true,\n        tileSize: 2048,\n        uppercase : true,\n        opacity: 0\n      },\n      leafletLayer: \"\"\n    },\n    //5 year max\n    {\n      baseUrl: 'https://fswms.nemac.org/forwarn_compare',\n      options: {\n        layers: `FW_${datestring}_5YR_FW2`,\n        format: 'image/png',\n        transparent: true,\n        tileSize: 2048,\n        uppercase : true,\n        opacity: 0\n      },\n      leafletLayer: \"\"\n    },\n    //all year median\n    {\n      baseUrl: 'https://fswms.nemac.org/forwarn_compare',\n      options: {\n        layers: `FW_${datestring}_MEDIAN_ALL_YEAR_FW2`,\n        format: 'image/png',\n        transparent: true,\n        tileSize: 2048,\n        uppercase : true,\n        opacity: 0\n      },\n      leafletLayer: \"\"\n    },\n  ]\n    return sampleLayer[index];\n  },\n  \"baseLayers\" : [\n    {\n      name: \"Streets\",\n      url: \"https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibHVrZWpheSIsImEiOiJjazVoM3JwaTMwZXJiM2t0ZDZyZnF5bnN3In0.NQ71qNFEXZZzlOhYyWlIPg\",\n      attribution:\"\",\n      layer: \"\",\n      theme: \"light\"\n    },\n    {\n      name: \"Light\",\n      url: \"https://api.mapbox.com/styles/v1/mapbox/light-v10/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibHVrZWpheSIsImEiOiJjazVoM3JwaTMwZXJiM2t0ZDZyZnF5bnN3In0.NQ71qNFEXZZzlOhYyWlIPg\",\n      attribution:\"\",\n      layer: \"\",\n      theme: \"light\"\n    },\n    {\n      name: \"Dark\",\n      url: \"https://api.mapbox.com/styles/v1/mapbox/dark-v10/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibHVrZWpheSIsImEiOiJjazVoM3JwaTMwZXJiM2t0ZDZyZnF5bnN3In0.NQ71qNFEXZZzlOhYyWlIPg\",\n      attribution:\"\",\n      layer: \"\",\n      theme: \"dark\"\n    },\n    {\n      name: \"Outdoors\",\n      url: \"https://api.mapbox.com/styles/v1/mapbox/outdoors-v11/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibHVrZWpheSIsImEiOiJjazVoM3JwaTMwZXJiM2t0ZDZyZnF5bnN3In0.NQ71qNFEXZZzlOhYyWlIPg\",\n      attribution:\"\",\n      layer: \"\",\n      theme: \"light\"\n    },\n    {\n      name: \"Satellite\",\n      url: \"https://api.mapbox.com/styles/v1/mapbox/satellite-v9/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibHVrZWpheSIsImEiOiJjazVoM3JwaTMwZXJiM2t0ZDZyZnF5bnN3In0.NQ71qNFEXZZzlOhYyWlIPg\",\n      attribution:\"\",\n      layer: \"\",\n      theme: \"dark\"\n    }\n  ],\n  \"productsList\" : [\n    'From Prior Year',\n    'Early Detect',\n    'From Prior 3-Year Max',\n    'From Prior 5-Year 90th Percentile',\n    'From All-Prior-Year Median'\n  ],\n  \"themesList\" : [\n    'Dark',\n    'Light'\n  ],\n}\nexport default config;\n","import config from \"./config\"\n\nfunction isLeapYear(year)\n{\n  return ((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0);\n}\n\nfunction toDate(julianDay, year) {\n  // structure: YYYYMMDD\n  julianDay = parseInt(julianDay);\n  let monthIndex = 0;\n  var dayCount = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n  var dayCountLY = [0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335];\n  if(isLeapYear(year)){\n    dayCount = dayCountLY;\n  }\n  for (let i = 0; i < dayCount.length; i++) {\n    if (julianDay > dayCount[i + 1]) {\n      monthIndex = i + 1;\n    }\n  }\n  let day = julianDay - dayCount[monthIndex];\n  let dateObj = new Date(year, monthIndex, day);\n  return dateObj;\n}\n\nfunction toWMSDate(dateObj, toHyphenate = false) {\n  var year = String(dateObj.getFullYear());\n  var month = String(dateObj.getMonth() + 1);\n  var day = String(dateObj.getDate());\n  if (month.length < 2) {\n    month = \"0\" + month;\n  }\n  if (day.length < 2) {\n    day = \"0\" + day;\n  }\n  var wmsString = \"\";\n  if (toHyphenate) {\n    wmsString = year + \"-\" + month + \"-\" + day;\n    return wmsString;\n  }\n  else {\n    wmsString = year + month + day;\n    return wmsString;\n  }\n}\nfunction getNextFWDate(startDate){\n  let datesForYear = getFWDatesForYear(startDate.getFullYear());\n  for(let i = 0; i < datesForYear.length; i++){\n    if(datesForYear[i] >= startDate){\n      return datesForYear[i];\n    }\n  }\n  return toDate(parseInt(config.juliandates[0], startDate.getFullYear()+1));\n}\nfunction getFWDatesForYear(year){\n  return config.juliandates.map(jd => {\n    const date = toDate(parseInt(jd) + 7, year) // 7 day offset\n    return date\n  })\n}\n\nDate.prototype.isLeapYear = function() {\n    var year = this.getFullYear();\n    if((year & 3) != 0) return false;\n    return ((year % 100) != 0 || (year % 400) == 0);\n};\n\n// Get Day of Year\nDate.prototype.getDOY = function() {\n    var dayCount = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n    var mn = this.getMonth();\n    var dn = this.getDate();\n    var dayOfYear = dayCount[mn] + dn;\n    if(mn > 1 && this.isLeapYear()) dayOfYear++;\n    return dayOfYear;\n};\n\n\nexport {isLeapYear, toDate, toWMSDate, getNextFWDate, getFWDatesForYear}\n","import light from './light'\nimport dark from './dark'\n\nconst themes = {\n  light,\n  dark,\n}\n\nexport default function getTheme(theme) {\n  return themes[theme]\n}\n","import { createMuiTheme } from '@material-ui/core/styles'\nimport { red } from '@material-ui/core/colors'\n\n// Normal or default theme\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#f5f5f5',\n    },\n    secondary: {\n      main: '#222222',\n    },\n    error: {\n      main: red.A400,\n    },\n    background: {\n      default: '#f5f5f5',\n    },\n    appBar: {\n      main: '#556cd6',\n      contrastText: '#222222',\n    },\n    nemacLogo: './nemac_logo_black.png',\n  },\n})\n\nexport default theme\n","import { createMuiTheme } from '@material-ui/core/styles'\nimport { red } from '@material-ui/core/colors'\n\n// Dark theme\nconst theme = createMuiTheme({\n  palette: {\n    type: 'dark',\n    primary: {\n      main: '#26292C',\n      light: 'rgb(81, 91, 95)',\n      dark: 'rgb(26, 35, 39)',\n      contrastText: '#ffffff',\n    },\n    secondary: {\n      main: '#ffffff',\n      light: 'rgb(255, 197, 112)',\n      dark: 'rgb(200, 147, 89)',\n      contrastText: 'rgba(0, 0, 0, 0.87)',\n    },\n    appBar: {\n      main: '#555555',\n      contrastText: '#ffffff',\n    },\n    error: {\n      main: red.A400,\n    },\n    nemacLogo: './nemac_logo_white.png',\n  },\n})\n\nexport default theme\n","import React, { useState } from 'react'\nimport { ThemeProvider } from '@material-ui/core/styles'\nimport getTheme from './themeswitcher'\n\n// eslint-disable-next-line no-unused-vars\nexport const CustomThemeContext = React.createContext(\n  {\n    currentTheme: 'dark',\n    setTheme: null,\n  },\n)\n\nconst CustomThemeProvider = (props) => {\n  // eslint-disable-next-line react/prop-types\n  const { children } = props\n\n  // Read current theme from localStorage or maybe from an api\n  const currentTheme = localStorage.getItem('appTheme') || 'dark'\n\n  // State to hold the selected theme name\n  const [themeName, _setThemeName] = useState(currentTheme)\n\n  // Retrieve the theme object by theme name\n  const theme = getTheme(themeName)\n\n  // Wrap _setThemeName to store new theme names in localStorage\n  const setThemeName = (name) => {\n    localStorage.setItem('appTheme', name)\n    _setThemeName(name)\n  }\n\n  const contextValue = {\n    currentTheme: themeName,\n    setTheme: setThemeName,\n  }\n\n  return (\n    <CustomThemeContext.Provider value={contextValue}>\n      <ThemeProvider theme={theme}>{children}</ThemeProvider>\n    </CustomThemeContext.Provider>\n  )\n}\n\nexport default CustomThemeProvider\n","import React, { useState, useEffect, useDebugValue, useRef, useContext } from \"react\"\nimport L from \"leaflet\"\nimport config from \"./config\"\nimport {\n  MapContainer,\n  useMap\n} from \"react-leaflet\"\nimport { Grid } from \"@material-ui/core\"\nimport AppBar from \"@material-ui/core/AppBar\"\nimport Toolbar from \"@material-ui/core/Toolbar\"\nimport nemacLogoWhite from \"./nemac_logo_white.png\"\nimport nemacLogoBlack from \"./nemac_logo_black.png\"\nimport forwarn2Legend from \"./forwarn2-legend.png\"\nimport FormControl from '@material-ui/core/FormControl'\nimport Select from '@material-ui/core/Select'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport {\n  MuiPickersUtilsProvider,\n  KeyboardDatePicker,\n} from '@material-ui/pickers'\nimport DateFnsUtils from '@date-io/date-fns'\nimport Slider from '@material-ui/core/Slider'\nimport { makeStyles, withStyles } from '@material-ui/core/styles'\nimport Button from '@material-ui/core/Button'\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow'\nimport StopIcon from '@material-ui/icons/Stop'\nimport AssessmentIcon from '@material-ui/icons/Assessment';\nimport Box from '@material-ui/core/Box';\nimport Modal from '@material-ui/core/Modal'\nimport Typography from '@material-ui/core/Typography'\nimport {isLeapYear, toDate, toWMSDate, getFWDatesForYear, getNextFWDate} from \"./datemanagement\"\nimport { CustomThemeContext } from './CustomThemeProvider'\nimport \"leaflet-loading\"\nimport 'leaflet-loading/src/Control.Loading.css'\nimport {geosearch} from 'esri-leaflet-geocoder'\nimport 'esri-leaflet-geocoder/dist/esri-leaflet-geocoder.css'\nimport {Line} from 'react-chartjs-2'\nimport { parse } from 'fast-xml-parser';\nimport { Chart } from 'chart.js';\n import annotationPlugin from 'chartjs-plugin-annotation'\nChart.register(annotationPlugin);\n\n// Map Defaults\nconst center = [35, -82]\nconst zoom = 13\n\nfunction useStateWithLabel(initialValue, name) {\n  const [value, setValue] = useState(initialValue)\n  useDebugValue(`${name}: ${value}`)\n  return [value, setValue]\n}\n\nconst getLayerRangeByDate = (startDate, endDate, wmsLayers) => {\n  let startIndex = -1\n  let endIndex = -1\n  wmsLayers.forEach((layer, index) => {\n    if (layer.date >= startDate && startIndex === -1) {\n      startIndex = index\n    }\n    if(layer.date >= endDate && endIndex === -1){\n      endIndex = index-1\n    }\n  })\n  if (endIndex === -1) {\n    endIndex = wmsLayers.length - 1\n  }\n  const newRange = wmsLayers.slice(startIndex, endIndex+1)\n  return newRange\n}\n\n\nexport function App(props) {\n  // Desired hook\n  function useCompare (val) {\n    const prevVal = usePrevious(val)\n    return prevVal !== val\n  }\n\n  // Helper hook\n  function usePrevious(value) {\n    const ref = useRef();\n    useEffect(() => {\n      ref.current = value;\n    });\n    return ref.current;\n  }\n\n\n  const {setTheme } = useContext(CustomThemeContext)\n  const [darkMode, setDarkMode] = useStateWithLabel(true);\n  // Initialize Material UI styles\n  const useStyles = makeStyles({\n    root: {\n      width: 300,\n    },\n    modal: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n    },\n    paper: {\n      position: 'absolute',\n      color: \"white\",\n      width: '100%',\n      height: '45vh',\n      background: 'rgb(26, 35, 39)',\n      boxShadow: 24,\n      padding: 4,\n    },\n  })\n  const classes = useStyles()\n\n\n\n  const [animating, setAnimating] = useStateWithLabel(false)\n  const [graphOn, setGraphOn] = useStateWithLabel(false, \"GraphOn\")\n  const [mapHeight, setMapHeight] = useStateWithLabel(\"90vh\", \"mapHeight\");\n  const [map, setMap] = useStateWithLabel('', \"map\");\n  const handleGraphOpen = () => {\n    //setModisData(getChartData(-78.65678578328217,35.45115625827913));\n    //console.log(fetchChartData(-78.65678578328217,35.45115625827913));\n    setGraphOn(!graphOn);\n    //if(graphOn){\n      const mapContainer = document.querySelector(\".mapContainer\");\n      if(!graphOn){\n        mapContainer.style.setProperty(\"height\", \"45vh\")\n      }\n      else{\n        mapContainer.style.setProperty(\"height\", \"90vh\")\n      }\n              map.invalidateSize()\n    //}\n  }\n  const updateGraphDataOnClick = () => {\n    var lat = map.getCenter().lat;\n    var lng = map.getCenter().lng;\n    console.log(lat, lng);\n    if(map!=null){\n      getChartData(lng,lat);\n    }\n  }\n  const [modisData, setModisData] = useStateWithLabel({\n    labels: ['1', '2', '3', '4', '5', '6'],\n    coordinates: [0,0],\n    datasets: [\n      {\n        label: '# of Votes',\n        data: [],\n        fill: false,\n        backgroundColor: 'rgb(3, 237, 96)',\n        borderColor: 'rgba(3, 237, 96, 0.8)',\n                      xAxisID:'xAxis',\n      },\n    ],\n  }, \"MODIS CHART DATA\");\n\n  const [modisDataConfig, setModisDataConfig] = useStateWithLabel({\n    maintainAspectRatio: false,\n    plugins: {\n            annotation: {\n                annotations: [{\n                  drawTime: \"afterDatasetsDraw\",\n            type: \"line\",\n            mode: \"vertical\",\n            scaleID: \"xAxis\",\n            value: 5,\n            borderWidth: 5,\n            borderColor: \"red\",\n            label: {\n              content: \"TODAY\",\n              enabled: true,\n              position: \"top\"\n            }\n                }]\n            }\n        },\n    scales: {\n      yAxes: [\n        {\n          ticks: {\n            beginAtZero: true,\n            steps: 10,\n            stepValue: 5,\n            max: 100,\n            fontColor: \"white\",\n          },\n        },\n      ],\n    },\n  }, \"MODIS CHART CONFIG\");\n\n  const [error, setError] = useState(null);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [items, setItems] = useState([]);\n\n  // Date State\n  const [startDate, setStartDate] = useStateWithLabel(new Date(\"2020-01-16\"), \"startDate\")\n  const [endDate, setEndDate] = useStateWithLabel(new Date(\"2021-02-17\"), \"endDate\")\n  const [dateRangeIndex, setDateRangeIndex] = useStateWithLabel(0, \"dateRangeIndex\")\n  const hasDateRangeIndexChanged = useCompare(dateRangeIndex);\n\n  // Basemaps\n  const basemaps = config.baseLayers\n  const [basemapIndex, setBasemapIndex] = useStateWithLabel(2, \"basemapIndex\")\n  const basemapRef = useRef()\n  const hasBaseMapChanged = useCompare(basemapIndex);\n  // Layers\n  const [productIndex, setProductIndex] = useStateWithLabel(0, \"productIndex\")\n  const hasProductIndexChanged = useCompare(productIndex);\n  const productsList = config.productsList;\n\n\n  const [wmsLayers, setWmsLayers] = useStateWithLabel(getWMSLayersYearRange(startDate, endDate, productIndex), \"fullWMSLayers\")\n\n\n  //theme switching\n  const themesList = config.themesList;\n  const [themeIndex, setThemeIndex] = useStateWithLabel(0, \"themeIndex\")\n\n  const [mapControls, setMapControls] = useStateWithLabel([], \"mapControls\")\n  const [isInitialRender, setIsInitialRender] = useStateWithLabel(true, \"initialrender\");\n\n\n  // State change and event handlers\n\n  const onStartDateChange = (date) => {\n    let day = date.getDate().toString()\n    if(day.length < 2){\n      day = \"0\" + day\n    }\n    let month = (date.getMonth()+1).toString()\n    if(month.length < 2) {\n      month = \"0\" + month\n    }\n    setStartDate(date)\n    let newLayerRange = getWMSLayersYearRange(date, endDate, productIndex)\n    setWmsLayers(newLayerRange)\n    setDateRangeIndex(0)\n  }\n\n  const onEndDateChange = (date) => {\n    let day = date.getDate().toString()\n    if (day.length < 2) {\n      day = \"0\" + day\n    }\n    let month = (date.getMonth()+1).toString()\n    if (month.length < 2) {\n      month = \"0\" + month\n    }\n    setEndDate(date) //set end date state\n    let newLayerRange = getWMSLayersYearRange(startDate, date, productIndex)\n    setWmsLayers(newLayerRange);\n    setDateRangeIndex(0)\n  }\n\n  const onBasemapChange = (event) => {\n    let index = event.target.value\n    setBasemapIndex(index)\n  }\n  const onThemeChange = (event) => {\n    let index = event.target.value\n    setThemeIndex(index)\n  }\n\n  const onProductChange = (event) => {\n    let index = event.target.value\n    setProductIndex(index);\n    let newProduct = getWMSLayersYearRange(startDate, endDate, index);\n    setWmsLayers(newProduct);\n    setDateRangeIndex(0);\n  }\n\n  const onSliderChange = (e, v) => {\n    console.log('slider change')\n    console.log('slider value is ' + String(v))\n    if (v !== dateRangeIndex) { setDateRangeIndex(v) }\n  }\n\n  const onAnimate = (e, v) => {\n    console.log('animate button clicked')\n    setAnimating(!animating)\n  }\n\n  function getWMSLayersYearRange(startDate, endDate, productIdx){\n    let wmsLayers = [];\n    let tempDate = getNextFWDate(startDate);\n    console.log(\"tempdate: \" + tempDate);\n    while(tempDate <= endDate){\n      const wmsdate = toWMSDate(tempDate);\n      const o = config.wms_template(wmsdate, productIdx)\n      o.leafletLayer = L.tileLayer.wms(o.baseUrl, o.options)\n      o.date = tempDate\n      wmsLayers.push(o);\n      tempDate.setDate(tempDate.getDate() + 1);\n      tempDate = getNextFWDate(tempDate);\n    }\n    return wmsLayers;\n  }\n  async function getChartData(lat, long){\n    let result = fetchChartData(lat, long);\n    result.then(function(response){\n      if(response.mugl!=null){\n        console.log(\"data fetch success\");\n        console.log(response);\n        let parsedData = parseValuesToInts(response.mugl.data.values);\n        let xAxis = parseDatesToString(response.mugl.data.values);\n        var newModisData = {\n          labels: xAxis,\n          coordinates: [lat,long],\n          datasets: [\n            {\n              label: response.mugl.verticalaxis.title,\n              data: parsedData,\n              fill: false,\n              backgroundColor: modisData.datasets[0].backgroundColor,\n              borderColor: modisData.datasets[0].borderColor,\n              xAxisID:'xAxis',\n            },\n          ],\n        }\n        setModisData(newModisData);\n      }\n      else{\n        console.log(\"invalid coordinates selected, do nothing\")\n      }\n    })\n  }\n  function fetchChartData(lat, long){\n    const baseurl = 'https://fcav-ndvi-dev.nemac.org/tsmugl_product.cgi?args=CONUS_NDVI,' + lat + ',' + long;\n    return fetch(baseurl).then((response) => response.text())\n    .then((textResponse) =>\n    parse(textResponse))\n    .catch(function(error){\n      console.log(\"invalid coords\")\n    })\n  }\n  function parseValuesToInts(data){\n    var dataArr = data.split(\"\\n\");\n    for(let i = 0; i < dataArr.length; i++){\n      //let str = String(data[i]);\n      let dataSTR = dataArr[i];\n      dataSTR = dataSTR.substr(9,11)\n      dataArr[i] = parseInt(dataSTR);\n      if(dataArr[i]< 0){\n        dataArr[i] = 0;\n      }\n    }\n    return dataArr;\n  }\n  function parseDatesToString(data){\n    var dateArr = data.split(\"\\n\");\n    for(let i = 0; i < dateArr.length; i++){\n      let dateSTR = dateArr[i];\n      dateSTR = dateSTR.substr(0, 8);\n      let year = dateSTR.substr(0,4);\n      let month = dateSTR.substr(4, 2);\n      let day = dateSTR.substr(6, 2);\n      //console.log(year + \"/\" + month + \"/\" + day);\n      dateSTR = year + \"/\" + month + \"/\" + day;\n      dateArr[i] = dateSTR;\n    }\n    return dateArr;\n  }\n\n  function MapController () {\n    const search = geosearch()\n    const map = useMap()\n    setMap(map);\n    // Clear map utility\n    const clearMap = () => {\n      console.log(\"Clearing map...\")\n      //basemapRef.current.bringToBack()\n      map.eachLayer((layer) => {\n        if (basemapRef.current === layer) {\n          console.log(\"Skipping basemap layer...\")\n          console.log(basemapRef.current)\n          return\n        }\n        console.log(\"Removing layer: \")\n        console.log(layer)\n        map.removeLayer(layer)\n      })\n    }\n    //console.log(useCompare(basemapIndex));\n    // Hook: basemap change\n    useEffect(() => {\n      if(hasBaseMapChanged || isInitialRender){\n        console.log('basemap change hook')\n        if(basemapRef.current!=null){\n        map.removeLayer(basemapRef.current)\n        }\n        let oldBasemap = basemapRef.current\n        let newBasemap = basemaps[basemapIndex]\n        let leafletLayer = new L.tileLayer(newBasemap.url, {\n          opacity: 0,\n          attribution: newBasemap.attribution\n        })\n        //\n        map.addLayer(leafletLayer)\n        leafletLayer.bringToBack()\n        leafletLayer.setOpacity(1)\n        basemapRef.current = leafletLayer\n      }\n      if(hasBaseMapChanged && !isInitialRender){\n        return () => {\n          //map.removeLayer(basemapRef.current)\n        }\n      }\n    }, [hasBaseMapChanged, basemapIndex])\n\n    // Hook: product change\n    useEffect(() => {\n      if(hasProductIndexChanged || isInitialRender){\n        console.log(\"Product change hook\");\n        //console.log(newWMS);\n        clearMap()\n      }\n    }, [hasProductIndexChanged, productIndex])\n\n    // Hook: date range index change\n    useEffect(() => {\n      if(hasDateRangeIndexChanged || isInitialRender || hasProductIndexChanged){\n        console.log(\"date range index hook\");\n        clearMap()\n        const layer = wmsLayers[dateRangeIndex]\n        console.log(\"new layer: \")\n        console.log(layer)\n        if (!map.hasLayer(layer.leafletLayer)) {\n          console.log(\"adding layer to the map...\")\n          map.addLayer(layer.leafletLayer)\n        }\n        layer.leafletLayer.bringToFront()\n        layer.leafletLayer.setOpacity(1)\n        if (animating) {\n          const newIndex = (dateRangeIndex+1) === wmsLayers.length ? 0 : dateRangeIndex+1\n          const timer = setTimeout(() => {\n            setDateRangeIndex(newIndex)\n          }, 10000)\n          return () => { if (timer) clearTimeout(timer) }\n        }\n      }\n    }, [hasDateRangeIndexChanged, dateRangeIndex, productIndex])\n\n    // Hook: Animation button clicked - add all layers to the map\n    useEffect(() => {\n      if (!animating) { return }\n      wmsLayers.forEach(layer => {\n        layer.leafletLayer.setOpacity(0)\n        if (!map.hasLayer(layer.leafletLayer)) {\n          map.addLayer(layer.leafletLayer)\n        }\n      })\n    }, [animating])\n\n    if(isInitialRender){ //check if initilization is complete so we don't reinitilize components\n    search.addTo(map);\n    const legend = L.control({ position: \"bottomright\"});\n    legend.onAdd = () => {\n      const div = L.DomUtil.create(\"div\", \"info legend\");\n      div.innerHTML =\n      \"<img src=\" + forwarn2Legend + \"\" +\" width=\\\"128.5px\\\" height=\\\"210.5px\\\">\";\n      return div;\n    };\n    legend.addTo(map);\n\n    //create loading indicator\n    var leafletLoading = L.Control.loading({\n      separate: true,\n      //position: 'topcenter'\n    });\n    leafletLoading.addTo(map);\n  }\n\n\n  if(isInitialRender){\n    setIsInitialRender(false);\n  }\n\n  return null\n\n}\n\nfunction AnimateBtn (props) {\n\n  return (\n    <Button\n      letiant=\"contained\"\n      color=\"secondary\"\n      className={classes.button}\n      startIcon={ animating ? <StopIcon/> : <PlayArrowIcon />}\n      onClick={ () => { setAnimating(!animating) } }\n      >{ animating ? \"Stop\" : \"Play\" }\n    </Button>\n  )\n\n}\nfunction GraphBtn(props){\n\n  //const handleGraphClose = () => setGraphOn(false);\n  //getChartData(-78.65678578328217,35.45115625827913)\n  return(\n    <Button\n      letiant=\"contained\"\n      color=\"secondary\"\n      className={classes.button}\n      startIcon={ graphOn ? <StopIcon/> : <AssessmentIcon />}\n      onClick={handleGraphOpen}\n      >{ graphOn ? \"Hide Graph\" : \"Show Graph\" }\n    </Button>\n  )\n}\nfunction GraphWindow(){\n  /*\n  <Modal className ={classes.modal}\n    open={graphOn}\n    onClose={handleGraphOpen}\n    aria-labelledby=\"modal-modal-title\"\n    aria-describedby=\"modal-modal-description\"\n    >\n    <Box className={classes.paper}>\n      <Line data={modisData} options={modisDataConfig} />\n    </Box>\n  </Modal>\n  */\n  return(\n    <Grid item xs={12}>\n    { graphOn ? <GraphData /> : null }\n    </Grid>\n  )\n}\n\nconst GraphData = () =>(\n\n    <Box className={classes.paper}>\n      <Typography variant=\"h4\" align=\"center\"> MODIS NDVI {modisData.coordinates[0] + ', ' + modisData.coordinates[1]} </Typography>\n      <div style={{height:\"35vh\"}}>\n      <Line data={modisData} options={modisDataConfig} plugins={[]}/>\n      </div>\n    </Box>\n\n)\n\nfunction DateRangePicker () {\n  return (\n    <MuiPickersUtilsProvider utils={DateFnsUtils}>\n      <KeyboardDatePicker style={{marginRight: 16 }}\n      disableToolbar\n      letiant=\"inline\"\n      format=\"MM/dd/yyyy\"\n      margin=\"normal\"\n      id=\"date-picker-inline\"\n      label=\"Start Date\"\n      value={startDate}\n      onChange={onStartDateChange}\n      KeyboardButtonProps={{\n        'aria-label': 'change date',\n      }}\n    />\n    <div className={classes.root} style={{marginRight: 16, marginTop: 16 }}>\n      <Slider color=\"secondary\"\n        defaultValue={dateRangeIndex}\n        aria-labelledby=\"discrete-slider\"\n        valueLabelDisplay=\"auto\"\n        step={1}\n        marks\n        min={0}\n        max={wmsLayers.length-1}\n        onChangeCommitted={ onSliderChange }\n      />\n    </div>\n    <KeyboardDatePicker style={{marginRight: 16 }}\n      disableToolbar\n      letiant=\"inline\"\n      format=\"MM/dd/yyyy\"\n      margin=\"normal\"\n      id=\"date-picker-inline\"\n      label=\"End Date\"\n      value={endDate}\n      onChange={onEndDateChange}\n      KeyboardButtonProps={{\n        'aria-label': 'change date',\n      }}\n    />\n    </MuiPickersUtilsProvider>\n  )\n}\n\n\nfunction BasemapSelect () {\n\n  return (\n    <FormControl letiant=\"outlined\" style={{marginRight: 16 }}>\n      <InputLabel shrink id=\"demo-simple-select-placeholder-label-label\">\n        Basemap\n      </InputLabel>\n      <Select\n        labelId=\"fcav-basemap-select-label\"\n        id=\"fcav-basemap-select\"\n        value={basemapIndex}\n        onChange={onBasemapChange}\n        label=\"Product\"\n      >\n      {\n        basemaps.map((basemap, index) => (\n        <MenuItem key={index} value={index}>{basemap.name}</MenuItem>\n      ))\n    }\n    </Select>\n    </FormControl>\n  )\n}\nfunction ThemeSelect () {\n  // Hook: Theme change\n  useEffect(() => {\n    //console.log(newWMS);\n    let chosenTheme = themesList[themeIndex]\n    chosenTheme = chosenTheme.toLowerCase()\n    console.log(\"chosen theme: \" + chosenTheme)\n    setTheme(chosenTheme)\n    if(chosenTheme === 'dark'){\n      setDarkMode(true);\n    }\n    else{\n      setDarkMode(false);\n    }\n  }, [themeIndex])\n  return (\n    <FormControl letiant=\"outlined\" style={{marginRight: 16 }}>\n      <InputLabel shrink id=\"demo-simple-select-placeholder-label-label\">\n      Theme\n      </InputLabel>\n      <Select\n        labelId=\"fcav-theme-select-label\"\n        id=\"fcav-theme-select\"\n        value={themeIndex}\n        onChange={onThemeChange}\n        label=\"Theme\"\n      >\n      {\n        themesList.map((theme, index) => (\n          <MenuItem key={index} value={index}>{theme}</MenuItem>\n        ))\n      }\n      </Select>\n    </FormControl>\n  )\n}\nfunction ProductSelect () {\n\n  return (\n    <FormControl letiant=\"outlined\" style={{marginRight: 16 }}>\n      <InputLabel shrink id=\"demo-simple-select-placeholder-label-label\">\n        Product\n      </InputLabel>\n      <Select\n        labelId=\"fcav-product-select-label\"\n        id=\"fcav-product-select\"\n        value={productIndex}\n        onChange={onProductChange}\n        label=\"Product\"\n      >\n        {\n          productsList.map((product, index) => (\n            <MenuItem key={index} value={index}>{product}</MenuItem>\n          ))\n        }\n      </Select>\n    </FormControl>\n  )\n}\n\nfunction TopBar () {\n  return (\n    //<ThemeProvider theme={fcavtheme}>\n    <Grid item xs={12}>\n      <AppBar\n      //id='menu'\n      position=\"static\"\n      style={{ zIndex: '0', flexWrap: 'flex', flexDirection: 'column'}}\n      >\n        <Toolbar>\n          <img src={ darkMode ? nemacLogoWhite : nemacLogoBlack} width=\"150\" alt=\"your mom\"></img>\n          <BasemapSelect/>\n          <DateRangePicker/>\n          <ProductSelect/>\n          <ThemeSelect/>\n          <GraphBtn/>\n        </Toolbar>\n      </AppBar>\n    </Grid>\n    //</ThemeProvider>\n  )\n}\n\n// App\nreturn (\n  <div>\n    <Grid container>\n      <TopBar/>\n      <Grid item xs={12}>\n        <MapContainer\n          className='mapContainer'\n          //loadingControl={true}\n          whenCreated={(map) => {\n              map.on(\"click\", function (e) {\n              const { lat, lng } = e.latlng;\n              getChartData(lng, lat)\n            });\n          }}\n          center={center}\n          zoom={zoom}\n          style={{ height: mapHeight,\n          display: \"flex\"}}\n        >\n          <MapController />\n        </MapContainer>\n      </Grid>\n              <GraphWindow/>\n    </Grid>\n  </div>\n)\n\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"leaflet/dist/leaflet.css\";\nimport {App} from \"./fcav\";\n//import { ThemeProvider, createMuiTheme } from '@material-ui/core/styles';\nimport CustomThemeProvider from './CustomThemeProvider'\n\n/*export const theme = createMuiTheme({\n  overrides: {\n     MuiAppBar: {\n       colorPrimary: {\n         backgroundColor: \"#FFC0CB\" // Pink AppBar\n       }     }   },\n  palette: {\n    primary: {\n      main: \"#424242\",\n      backgroundColor: \"#424242\"\n    },\n    secondary: {\n      main: \"#e0e0e0\"\n    }\n  }\n});*/\nconst rootElement = document.getElementById(\"app\");\nReactDOM.render(\n  <CustomThemeProvider>\n    <App/>,\n    </CustomThemeProvider>,\n  rootElement\n);\n"],"sourceRoot":""}