{"version":3,"sources":["nemac_logo_white.png","nemac_logo_black.png","forwarn2-legend.png","config.js","datemanagement.js","themeswitcher.js","light.js","dark.js","CustomThemeProvider.js","fcav.js","index.js"],"names":["module","exports","config","datestring","index","baseUrl","options","layers","format","transparent","tileSize","uppercase","opacity","leafletLayer","name","url","attribution","layer","theme","toDate","julianDay","year","parseInt","monthIndex","dayCount","isLeapYear","i","length","day","Date","toWMSDate","dateObj","toHyphenate","String","getFullYear","month","getMonth","getDate","getNextFWDate","startDate","datesForYear","juliandates","map","jd","prototype","this","getDOY","mn","dn","dayOfYear","themes","light","createMuiTheme","palette","primary","main","secondary","error","red","A400","background","default","appBar","contrastText","nemacLogo","dark","type","CustomThemeContext","React","createContext","currentTheme","setTheme","CustomThemeProvider","props","children","localStorage","getItem","useState","themeName","_setThemeName","getTheme","contextValue","setItem","Provider","value","ThemeProvider","Chart","register","annotationPlugin","center","useStateWithLabel","initialValue","setValue","useDebugValue","rootElement","document","getElementById","ReactDOM","render","useCompare","val","ref","useRef","useEffect","current","usePrevious","useContext","darkMode","setDarkMode","classes","makeStyles","root","width","modal","display","alignItems","justifyContent","paper","position","color","height","boxShadow","padding","useStyles","animating","graphOn","setGraphOn","currentGraphCoords","setCurrentGraphCoords","hasGraphCoordsChanged","mapHeight","setMap","handleGraphOpen","mapContainer","querySelector","style","setProperty","invalidateSize","labels","coordinates","datasets","label","data","fill","backgroundColor","borderColor","xAxisID","modisData","setModisData","maintainAspectRatio","plugins","annotation","annotations","drawTime","mode","scaleID","borderWidth","content","enabled","scales","yAxes","ticks","beginAtZero","steps","stepValue","max","fontColor","modisDataConfig","setModisDataConfig","setStartDate","endDate","setEndDate","dateRangeIndex","setDateRangeIndex","setCurrentDate","hasDateRangeIndexChanged","hasStartDateChanged","hasEndDateChanged","basemaps","baseLayers","basemapIndex","setBasemapIndex","basemapRef","hasBaseMapChanged","productIndex","setProductIndex","hasProductIndexChanged","productsList","getWMSLayersYearRange","wmsLayers","setWmsLayers","themesList","themeIndex","setThemeIndex","isInitialRender","setIsInitialRender","onStartDateChange","date","toString","newLayerRange","onEndDateChange","onBasemapChange","event","target","onThemeChange","onProductChange","newProduct","onSliderChange","e","v","productIdx","tempDate","wmsdate","o","wms_template","L","tileLayer","wms","push","setDate","getChartData","lat","long","a","fetchChartData","then","response","mugl","console","log","parsedData","parseValuesToInts","values","xAxis","parseDatesToString","newModisData","Object","assign","verticalaxis","title","fetch","text","textResponse","parse","catch","dataArr","split","dataSTR","substr","dateArr","dateSTR","startIndex","endIndex","dateObjArr","slice","GraphBtn","Button","letiant","className","button","startIcon","onClick","GraphData","Box","Typography","variant","align","toFixed","DateRangePicker","utils","DateFnsUtils","marginRight","disableToolbar","margin","id","onChange","KeyboardButtonProps","marginTop","Slider","defaultValue","aria-labelledby","valueLabelDisplay","step","marks","min","onChangeCommitted","BasemapSelect","FormControl","InputLabel","shrink","Select","labelId","basemap","MenuItem","key","ThemeSelect","chosenTheme","toLowerCase","ProductSelect","product","Grid","container","item","xs","AppBar","zIndex","flexWrap","flexDirection","Toolbar","src","nemacLogoWhite","nemacLogoBlack","alt","MapContainer","whenCreated","on","latlng","lng","zoom","search","geosearch","useMap","clearMap","eachLayer","removeLayer","newBasemap","addLayer","bringToBack","setOpacity","hasLayer","bringToFront","newIndex","timer","setTimeout","clearTimeout","newLineValue","wmsLayerStrings","wmsLayer","wmsLayerYear","wmsLayerDate","indexOf","getChartLineValue","forEach","addTo","legend","control","onAdd","div","DomUtil","create","innerHTML","forwarn2Legend","Control","loading","separate"],"mappings":"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","file":"static/js/main.4f6e2525.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/nemac_logo_white.b9acf019.png\";","module.exports = __webpack_public_path__ + \"static/media/nemac_logo_black.f0b63d98.png\";","module.exports = __webpack_public_path__ + \"static/media/forwarn2-legend.e6734a0a.png\";","const config = {\n  \"juliandates\" : [  \"001\",  \"009\",  \"017\",  \"025\",  \"033\",  \"041\",  \"049\",  \"057\",  \"065\",  \"073\",  \"081\",  \"089\",  \"097\",  \"105\",  \"113\",  \"121\",  \"129\",  \"137\",  \"145\",  \"153\",  \"161\",  \"169\",  \"177\",  \"185\",  \"193\",  \"201\",  \"209\",  \"217\",  \"225\",  \"233\",  \"241\",  \"249\",  \"257\",  \"265\",  \"273\",  \"281\",  \"289\",  \"297\",  \"305\",  \"313\",  \"321\",  \"329\",  \"337\",  \"345\",  \"353\",  \"361\"],\n  \"wms_template\" : function (datestring, index){\n    //from prior year\n    const sampleLayer = [\n      {\n      baseUrl: 'https://fswms.nemac.org/forwarn_compare',\n      options: {\n        layers: `FW_${datestring}_1YR_FW2`,\n        format: 'image/png',\n        transparent: true,\n        tileSize: 2048,\n        uppercase : true,\n        opacity: 0\n      },\n      leafletLayer: \"\"\n    },\n    //early detect\n    {\n      baseUrl: 'https://fswms.nemac.org/forwarn_compare',\n      options: {\n        layers: `FW_${datestring}_ALC_FW2`,\n        format: 'image/png',\n        transparent: true,\n        tileSize: 2048,\n        uppercase : true,\n        opacity: 0\n      },\n      leafletLayer: \"\"\n    },\n    //3 year max\n    {\n      baseUrl: 'https://fswms.nemac.org/forwarn_compare',\n      options: {\n        layers: `FW_${datestring}_3YR_FW2`,\n        format: 'image/png',\n        transparent: true,\n        tileSize: 2048,\n        uppercase : true,\n        opacity: 0\n      },\n      leafletLayer: \"\"\n    },\n    //5 year max\n    {\n      baseUrl: 'https://fswms.nemac.org/forwarn_compare',\n      options: {\n        layers: `FW_${datestring}_5YR_FW2`,\n        format: 'image/png',\n        transparent: true,\n        tileSize: 2048,\n        uppercase : true,\n        opacity: 0\n      },\n      leafletLayer: \"\"\n    },\n    //all year median\n    {\n      baseUrl: 'https://fswms.nemac.org/forwarn_compare',\n      options: {\n        layers: `FW_${datestring}_MEDIAN_ALL_YEAR_FW2`,\n        format: 'image/png',\n        transparent: true,\n        tileSize: 2048,\n        uppercase : true,\n        opacity: 0\n      },\n      leafletLayer: \"\"\n    },\n  ]\n    return sampleLayer[index];\n  },\n  \"baseLayers\" : [\n    {\n      name: \"Streets\",\n      url: \"https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibHVrZWpheSIsImEiOiJjazVoM3JwaTMwZXJiM2t0ZDZyZnF5bnN3In0.NQ71qNFEXZZzlOhYyWlIPg\",\n      attribution:\"\",\n      layer: \"\",\n      theme: \"light\"\n    },\n    {\n      name: \"Light\",\n      url: \"https://api.mapbox.com/styles/v1/mapbox/light-v10/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibHVrZWpheSIsImEiOiJjazVoM3JwaTMwZXJiM2t0ZDZyZnF5bnN3In0.NQ71qNFEXZZzlOhYyWlIPg\",\n      attribution:\"\",\n      layer: \"\",\n      theme: \"light\"\n    },\n    {\n      name: \"Dark\",\n      url: \"https://api.mapbox.com/styles/v1/mapbox/dark-v10/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibHVrZWpheSIsImEiOiJjazVoM3JwaTMwZXJiM2t0ZDZyZnF5bnN3In0.NQ71qNFEXZZzlOhYyWlIPg\",\n      attribution:\"\",\n      layer: \"\",\n      theme: \"dark\"\n    },\n    {\n      name: \"Outdoors\",\n      url: \"https://api.mapbox.com/styles/v1/mapbox/outdoors-v11/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibHVrZWpheSIsImEiOiJjazVoM3JwaTMwZXJiM2t0ZDZyZnF5bnN3In0.NQ71qNFEXZZzlOhYyWlIPg\",\n      attribution:\"\",\n      layer: \"\",\n      theme: \"light\"\n    },\n    {\n      name: \"Satellite\",\n      url: \"https://api.mapbox.com/styles/v1/mapbox/satellite-v9/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibHVrZWpheSIsImEiOiJjazVoM3JwaTMwZXJiM2t0ZDZyZnF5bnN3In0.NQ71qNFEXZZzlOhYyWlIPg\",\n      attribution:\"\",\n      layer: \"\",\n      theme: \"dark\"\n    }\n  ],\n  \"productsList\" : [\n    'From Prior Year',\n    'Early Detect',\n    'From Prior 3-Year Max',\n    'From Prior 5-Year 90th Percentile',\n    'From All-Prior-Year Median'\n  ],\n  \"themesList\" : [\n    'Dark',\n    'Light'\n  ],\n}\nexport default config;\n","import config from \"./config\"\n\nfunction isLeapYear(year)\n{\n  return ((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0);\n}\n\nfunction toDate(julianDay, year) {\n  // structure: YYYYMMDD\n  julianDay = parseInt(julianDay);\n  let monthIndex = 0;\n  var dayCount = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n  var dayCountLY = [0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335];\n  if(isLeapYear(year)){\n    dayCount = dayCountLY;\n  }\n  for (let i = 0; i < dayCount.length; i++) {\n    if (julianDay > dayCount[i + 1]) {\n      monthIndex = i + 1;\n    }\n  }\n  let day = julianDay - dayCount[monthIndex];\n  let dateObj = new Date(year, monthIndex, day);\n  return dateObj;\n}\n\nfunction toWMSDate(dateObj, toHyphenate = false) {\n  var year = String(dateObj.getFullYear());\n  var month = String(dateObj.getMonth() + 1);\n  var day = String(dateObj.getDate());\n  if (month.length < 2) {\n    month = \"0\" + month;\n  }\n  if (day.length < 2) {\n    day = \"0\" + day;\n  }\n  var wmsString = \"\";\n  if (toHyphenate) {\n    wmsString = year + \"-\" + month + \"-\" + day;\n    return wmsString;\n  }\n  else {\n    wmsString = year + month + day;\n    return wmsString;\n  }\n}\nfunction getNextFWDate(startDate){\n  let datesForYear = getFWDatesForYear(startDate.getFullYear());\n  for(let i = 0; i < datesForYear.length; i++){\n    if(datesForYear[i] >= startDate){\n      return datesForYear[i];\n    }\n  }\n  return toDate(parseInt(config.juliandates[0], startDate.getFullYear()+1));\n}\nfunction getFWDatesForYear(year){\n  return config.juliandates.map(jd => {\n    const date = toDate(parseInt(jd) + 7, year) // 7 day offset\n    return date\n  })\n}\n\nDate.prototype.isLeapYear = function() {\n    var year = this.getFullYear();\n    if((year & 3) != 0) return false;\n    return ((year % 100) != 0 || (year % 400) == 0);\n};\n\n// Get Day of Year\nDate.prototype.getDOY = function() {\n    var dayCount = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n    var mn = this.getMonth();\n    var dn = this.getDate();\n    var dayOfYear = dayCount[mn] + dn;\n    if(mn > 1 && this.isLeapYear()) dayOfYear++;\n    return dayOfYear;\n};\n\n\nexport {isLeapYear, toDate, toWMSDate, getNextFWDate, getFWDatesForYear}\n","import light from './light'\nimport dark from './dark'\n\nconst themes = {\n  light,\n  dark,\n}\n\nexport default function getTheme(theme) {\n  return themes[theme]\n}\n","import { createMuiTheme } from '@material-ui/core/styles'\nimport { red } from '@material-ui/core/colors'\n\n// Normal or default theme\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#f5f5f5',\n    },\n    secondary: {\n      main: '#222222',\n    },\n    error: {\n      main: red.A400,\n    },\n    background: {\n      default: '#f5f5f5',\n    },\n    appBar: {\n      main: '#556cd6',\n      contrastText: '#222222',\n    },\n    nemacLogo: './nemac_logo_black.png',\n  },\n})\n\nexport default theme\n","import { createMuiTheme } from '@material-ui/core/styles'\nimport { red } from '@material-ui/core/colors'\n\n// Dark theme\nconst theme = createMuiTheme({\n  palette: {\n    type: 'dark',\n    primary: {\n      main: '#26292C',\n      light: 'rgb(81, 91, 95)',\n      dark: 'rgb(26, 35, 39)',\n      contrastText: '#ffffff',\n    },\n    secondary: {\n      main: '#ffffff',\n      light: 'rgb(255, 197, 112)',\n      dark: 'rgb(200, 147, 89)',\n      contrastText: 'rgba(0, 0, 0, 0.87)',\n    },\n    appBar: {\n      main: '#555555',\n      contrastText: '#ffffff',\n    },\n    error: {\n      main: red.A400,\n    },\n    nemacLogo: './nemac_logo_white.png',\n  },\n})\n\nexport default theme\n","import React, { useState } from 'react'\nimport { ThemeProvider } from '@material-ui/core/styles'\nimport getTheme from './themeswitcher'\n\n// eslint-disable-next-line no-unused-vars\nexport const CustomThemeContext = React.createContext(\n  {\n    currentTheme: 'dark',\n    setTheme: null,\n  },\n)\n\nconst CustomThemeProvider = (props) => {\n  // eslint-disable-next-line react/prop-types\n  const { children } = props\n\n  // Read current theme from localStorage or maybe from an api\n  const currentTheme = localStorage.getItem('appTheme') || 'dark'\n\n  // State to hold the selected theme name\n  const [themeName, _setThemeName] = useState(currentTheme)\n\n  // Retrieve the theme object by theme name\n  const theme = getTheme(themeName)\n\n  // Wrap _setThemeName to store new theme names in localStorage\n  const setThemeName = (name) => {\n    localStorage.setItem('appTheme', name)\n    _setThemeName(name)\n  }\n\n  const contextValue = {\n    currentTheme: themeName,\n    setTheme: setThemeName,\n  }\n\n  return (\n    <CustomThemeContext.Provider value={contextValue}>\n      <ThemeProvider theme={theme}>{children}</ThemeProvider>\n    </CustomThemeContext.Provider>\n  )\n}\n\nexport default CustomThemeProvider\n","import React, { useState, useEffect, useDebugValue, useRef, useContext } from \"react\"\nimport L from \"leaflet\"\nimport config from \"./config\"\nimport {\n  MapContainer,\n  useMap\n} from \"react-leaflet\"\nimport { Grid } from \"@material-ui/core\"\nimport AppBar from \"@material-ui/core/AppBar\"\nimport Toolbar from \"@material-ui/core/Toolbar\"\nimport nemacLogoWhite from \"./nemac_logo_white.png\"\nimport nemacLogoBlack from \"./nemac_logo_black.png\"\nimport forwarn2Legend from \"./forwarn2-legend.png\"\nimport FormControl from '@material-ui/core/FormControl'\nimport Select from '@material-ui/core/Select'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport {\n  MuiPickersUtilsProvider,\n  KeyboardDatePicker,\n} from '@material-ui/pickers'\nimport DateFnsUtils from '@date-io/date-fns'\nimport Slider from '@material-ui/core/Slider'\nimport { makeStyles, withStyles } from '@material-ui/core/styles'\nimport Button from '@material-ui/core/Button'\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow'\nimport StopIcon from '@material-ui/icons/Stop'\nimport AssessmentIcon from '@material-ui/icons/Assessment';\nimport Box from '@material-ui/core/Box';\nimport Modal from '@material-ui/core/Modal'\nimport Typography from '@material-ui/core/Typography'\nimport {isLeapYear, toDate, toWMSDate, getFWDatesForYear, getNextFWDate} from \"./datemanagement\"\nimport { CustomThemeContext } from './CustomThemeProvider'\nimport \"leaflet-loading\"\nimport 'leaflet-loading/src/Control.Loading.css'\nimport {geosearch} from 'esri-leaflet-geocoder'\nimport 'esri-leaflet-geocoder/dist/esri-leaflet-geocoder.css'\nimport {Line} from 'react-chartjs-2'\nimport { parse } from 'fast-xml-parser';\nimport { Chart } from 'chart.js';\n import annotationPlugin from 'chartjs-plugin-annotation'\nChart.register(annotationPlugin);\n\n// Map Defaults\nconst center = [35, -82]\nconst zoom = 13\n\nfunction useStateWithLabel(initialValue, name) {\n  const [value, setValue] = useState(initialValue)\n  useDebugValue(`${name}: ${value}`)\n  return [value, setValue]\n}\n\nconst getLayerRangeByDate = (startDate, endDate, wmsLayers) => {\n  let startIndex = -1\n  let endIndex = -1\n  wmsLayers.forEach((layer, index) => {\n    if (layer.date >= startDate && startIndex === -1) {\n      startIndex = index\n    }\n    if(layer.date >= endDate && endIndex === -1){\n      endIndex = index-1\n    }\n  })\n  if (endIndex === -1) {\n    endIndex = wmsLayers.length - 1\n  }\n  const newRange = wmsLayers.slice(startIndex, endIndex+1)\n  return newRange\n}\n\n\nexport function App(props) {\n  // Desired hook\n  function useCompare (val) {\n    const prevVal = usePrevious(val)\n    return prevVal !== val\n  }\n\n  // Helper hook\n  function usePrevious(value) {\n    const ref = useRef();\n    useEffect(() => {\n      ref.current = value;\n    });\n    return ref.current;\n  }\n\n\n  const {setTheme } = useContext(CustomThemeContext)\n  const [darkMode, setDarkMode] = useStateWithLabel(true);\n  // Initialize Material UI styles\n  const useStyles = makeStyles({\n    root: {\n      width: 300,\n    },\n    modal: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n    },\n    paper: {\n      position: 'absolute',\n      color: \"white\",\n      width: '100%',\n      height: '45vh',\n      background: 'rgb(26, 35, 39)',\n      boxShadow: 24,\n      padding: 4,\n    },\n  })\n  const classes = useStyles()\n\n\n\n  const [animating, setAnimating] = useStateWithLabel(false)\n  const [graphOn, setGraphOn] = useStateWithLabel(false, \"GraphOn\")\n  const [currentGraphCoords, setCurrentGraphCoords] = useStateWithLabel([0,0], \"currentGraphCoords\")\n  const hasGraphCoordsChanged = useCompare(currentGraphCoords);\n  const [mapHeight, setMapHeight] = useStateWithLabel(\"90vh\", \"mapHeight\");\n  const [map, setMap] = useStateWithLabel('', \"map\");\n  const handleGraphOpen = () => {\n    //setModisData(getChartData(-78.65678578328217,35.45115625827913));\n    //console.log(fetchChartData(-78.65678578328217,35.45115625827913));\n    setGraphOn(!graphOn);\n    //if(graphOn){\n      const mapContainer = document.querySelector(\".mapContainer\");\n      if(!graphOn){\n        mapContainer.style.setProperty(\"height\", \"45vh\")\n      }\n      else{\n        mapContainer.style.setProperty(\"height\", \"90vh\")\n      }\n              map.invalidateSize()\n    //}\n  }\n  const updateGraphDataOnClick = () => {\n    var lat = map.getCenter().lat;\n    var lng = map.getCenter().lng;\n    console.log(lat, lng);\n    setCurrentGraphCoords([lat,lng]);\n    if(map!=null){\n      getChartData(lng,lat);\n    }\n  }\n  const [modisData, setModisData] = useStateWithLabel({\n    labels: ['1', '2', '3', '4', '5', '6'],\n    coordinates: [0,0],\n    datasets: [\n      {\n        label: '# of Votes',\n        data: [],\n        fill: false,\n        backgroundColor: 'rgb(3, 237, 96)',\n        borderColor: 'rgba(3, 237, 96, 0.8)',\n        xAxisID:'xAxis',\n      },\n    ],\n  }, \"MODIS CHART DATA\");\n\n  const [modisDataConfig, setModisDataConfig] = useStateWithLabel({\n    maintainAspectRatio: false,\n    plugins: {\n            annotation: {\n                annotations: [{\n                  drawTime: \"afterDatasetsDraw\",\n            type: \"line\",\n            mode: \"vertical\",\n            scaleID: \"xAxis\",\n            value: 0,\n            borderWidth: 5,\n            borderColor: \"white\",\n            label: {\n              content: \"TODAY\",\n              enabled: true,\n              position: \"top\"\n            }\n                }]\n            }\n        },\n    scales: {\n      yAxes: [\n        {\n          ticks: {\n            beginAtZero: true,\n            steps: 10,\n            stepValue: 5,\n            max: 100,\n            fontColor: \"white\",\n          },\n        },\n      ],\n    },\n  }, \"MODIS CHART CONFIG\");\n\n  const [error, setError] = useState(null);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [items, setItems] = useState([]);\n\n  // Date State\n  const [startDate, setStartDate] = useStateWithLabel(new Date(\"2020-01-16\"), \"startDate\")\n  const [endDate, setEndDate] = useStateWithLabel(new Date(\"2021-02-17\"), \"endDate\")\n  const [dateRangeIndex, setDateRangeIndex] = useStateWithLabel(0, \"dateRangeIndex\")\n  const [currentDate, setCurrentDate] = useStateWithLabel(new Date(\"2020-01-16\"), \"currentDate\");\n  const hasDateRangeIndexChanged = useCompare(dateRangeIndex);\n  const hasStartDateChanged = useCompare(startDate);\n  const hasEndDateChanged = useCompare(endDate);\n\n  // Basemaps\n  const basemaps = config.baseLayers\n  const [basemapIndex, setBasemapIndex] = useStateWithLabel(2, \"basemapIndex\")\n  const basemapRef = useRef()\n  const hasBaseMapChanged = useCompare(basemapIndex);\n  // Layers\n  const [productIndex, setProductIndex] = useStateWithLabel(0, \"productIndex\")\n  const hasProductIndexChanged = useCompare(productIndex);\n  const productsList = config.productsList;\n\n\n  const [wmsLayers, setWmsLayers] = useStateWithLabel(getWMSLayersYearRange(startDate, endDate, productIndex), \"fullWMSLayers\")\n\n\n  //theme switching\n  const themesList = config.themesList;\n  const [themeIndex, setThemeIndex] = useStateWithLabel(0, \"themeIndex\")\n\n  const [mapControls, setMapControls] = useStateWithLabel([], \"mapControls\")\n  const [isInitialRender, setIsInitialRender] = useStateWithLabel(true, \"initialrender\");\n\n\n  // State change and event handlers\n\n  const onStartDateChange = (date) => {\n    let day = date.getDate().toString()\n    if(day.length < 2){\n      day = \"0\" + day\n    }\n    let month = (date.getMonth()+1).toString()\n    if(month.length < 2) {\n      month = \"0\" + month\n    }\n    setStartDate(date)\n    let newLayerRange = getWMSLayersYearRange(date, endDate, productIndex)\n    setWmsLayers(newLayerRange)\n    setDateRangeIndex(0)\n    //getChartData(modisData.coordinates[0], modisData.coordinates[1]);\n  }\n\n  const onEndDateChange = (date) => {\n    let day = date.getDate().toString()\n    if (day.length < 2) {\n      day = \"0\" + day\n    }\n    let month = (date.getMonth()+1).toString()\n    if (month.length < 2) {\n      month = \"0\" + month\n    }\n    setEndDate(date) //set end date state\n    let newLayerRange = getWMSLayersYearRange(startDate, date, productIndex)\n    setWmsLayers(newLayerRange);\n    setDateRangeIndex(0)\n  }\n\n  const onBasemapChange = (event) => {\n    let index = event.target.value\n    setBasemapIndex(index)\n  }\n  const onThemeChange = (event) => {\n    let index = event.target.value\n    setThemeIndex(index)\n  }\n\n  const onProductChange = (event) => {\n    let index = event.target.value\n    setProductIndex(index);\n    let newProduct = getWMSLayersYearRange(startDate, endDate, index);\n    setWmsLayers(newProduct);\n    setDateRangeIndex(0);\n  }\n\n  const onSliderChange = (e, v) => {\n//    console.log('slider change')\n//    console.log('slider value is ' + String(v))\n    if (v !== dateRangeIndex) {\n       setDateRangeIndex(v);\n       setCurrentDate(wmsLayers[v].date);\n     }\n  }\n\n  const onAnimate = (e, v) => {\n    console.log('animate button clicked')\n    setAnimating(!animating)\n  }\n\n  function getWMSLayersYearRange(startDate, endDate, productIdx){\n    let wmsLayers = [];\n    let tempDate = getNextFWDate(startDate);\n//    console.log(\"tempdate: \" + tempDate);\n    while(tempDate <= endDate){\n      const wmsdate = toWMSDate(tempDate);\n      const o = config.wms_template(wmsdate, productIdx)\n      o.leafletLayer = L.tileLayer.wms(o.baseUrl, o.options)\n      o.date = tempDate\n      wmsLayers.push(o);\n      tempDate.setDate(tempDate.getDate() + 1);\n      tempDate = getNextFWDate(tempDate);\n    }\n    return wmsLayers;\n  }\n  async function getChartData(lat, long){\n    let result = fetchChartData(lat, long);\n    result.then(function(response){\n      if(response.mugl!=null){\n        console.log(\"data fetch success\");\n        console.log(response);\n        let parsedData = parseValuesToInts(response.mugl.data.values);\n        let xAxis = parseDatesToString(response.mugl.data.values);\n        let newModisData = Object.assign({}, modisData);\n        newModisData.labels = xAxis;\n        newModisData.coordinates = [lat,long];\n        newModisData.datasets[0].label = response.mugl.verticalaxis.title;\n        newModisData.datasets[0].data = parsedData;\n        setModisData(newModisData);\n      }\n      else{\n        console.log(\"invalid coordinates selected, do nothing\")\n      }\n    })\n  }\n  function fetchChartData(lat, long){\n    const baseurl = 'https://fcav-ndvi-dev.nemac.org/tsmugl_product.cgi?args=CONUS_NDVI,' + lat + ',' + long;\n    return fetch(baseurl).then((response) => response.text())\n    .then((textResponse) =>\n    parse(textResponse))\n    .catch(function(error){\n      console.log(\"invalid coords\")\n    })\n  }\n  function parseValuesToInts(data){\n    var dataArr = data.split(\"\\n\");\n    for(let i = 0; i < dataArr.length; i++){\n      //let str = String(data[i]);\n      let dataSTR = dataArr[i];\n      dataSTR = dataSTR.substr(9,11)\n      dataArr[i] = parseInt(dataSTR);\n      if(dataArr[i]< 0){\n        dataArr[i] = 0;\n      }\n    }\n    return dataArr;\n  }\n  function parseDatesToString(data){\n    var dateArr = data.split(\"\\n\");\n    for(let i = 0; i < dateArr.length; i++){\n      let dateSTR = dateArr[i];\n      dateSTR = dateSTR.substr(0, 8);\n      let year = dateSTR.substr(0,4);\n      let month = dateSTR.substr(4, 2);\n      let day = dateSTR.substr(6, 2);\n      //console.log(year + \"/\" + month + \"/\" + day);\n      dateSTR = month + \"/\" + day + \"/\" + year;\n      dateArr[i] = dateSTR;\n    }\n    //trim array to range\n    let startIndex = 0;\n    let endIndex = 0;\n    let dateObjArr = [dateArr.length];\n    for(let i = 0; i < dateArr.length; i++){\n      let dateSTR = dateArr[i];\n      let month = dateSTR.substr(0,2);\n      let day = dateSTR.substr(3, 2);\n      let year = dateSTR.substr(6, 4);\n      let dateObj = new Date(parseInt(year), parseInt(month)-1, parseInt(day));\n      dateObjArr[i] = dateObj;\n      //console.log(dateObj);\n    }\n    console.log(dateObjArr);\n    for(let i = 0; i < dateObjArr.length; i++){\n      if(startDate > dateObjArr[i]){\n        startIndex = i+1;\n      }\n    }\n    for(let i = dateObjArr.length; i > 0; i--){\n      if(endDate < dateObjArr[i]){\n        endIndex = i;\n      }\n    }\n    console.log(startIndex + ', ' + endIndex);\n    return dateArr.slice(startIndex, endIndex);\n  }\n  /*function chartLineValue(){\n    let chartDate = modisData.labels[dateRangeIndex];\n    let wmsDate = wmsLayers[dateRangeIndex].date;\n    wmsDate.setDate(wmsDate.getDate() - 1); //account for 1 day offset\n\n    let chartDateSTR = chartDate;\n    let month = chartDateSTR.substr(0,2);\n    let day = chartDateSTR.substr(3, 2);\n    let year = chartDateSTR.substr(6, 4);\n    let chartDateObj = new Date(parseInt(year), parseInt(month)-1, parseInt(day));\n    let dayDifference = Math.floor((wmsDate - chartDateObj) / (1000*60*60*24))\n    console.log(\"chart date: \" + chartDateObj + \" wmsDate: \" + wmsDate);\n    if(dayDifference!=0){\n      console.log(\"difference detected: \" + dayDifference);\n      let adjustedIndex = dateRangeIndex + 0.5;\n      return adjustedIndex;\n    }\n    else{\n      return dateRangeIndex;\n    }\n  }*/\n  function getChartLineValue(){\n    /*let chartDate = modisData.labels[dateRangeIndex];\n    let wmsDate = wmsLayers[dateRangeIndex].date;\n    wmsDate.setDate(wmsDate.getDate() - 1); //account for 1 day offset\n\n    let chartDateSTR = chartDate;\n    let month = chartDateSTR.substr(0,2);\n    let day = chartDateSTR.substr(3, 2);\n    let year = chartDateSTR.substr(6, 4);\n    let chartDateObj = new Date(parseInt(year), parseInt(month)-1, parseInt(day));\n    console.log(chartDateObj);\n\n    let dateIndex = -1;\n    for(let i = 0; i < wmsLayers.length; i++){\n      let wmsDate = wmsLayers[i].date;\n      wmsDate.setDate(wmsDate.getDate() - 1); //account for 1 day offset\n      if(wmsDate == chartDateObj){\n        dateIndex = i;\n      }\n    }\n    console.log(dateIndex);\n    return dateIndex;*/\n    let chartDate = modisData.labels[dateRangeIndex];\n\n    var wmsLayerStrings = [wmsLayers.length];\n    for(let i = 0; i < wmsLayers.length; i++){\n      let wmsLayer = wmsLayers[i].options.layers;\n\n      let wmsLayerYear = wmsLayer.substr(3, 4);\n      let wmsLayerMonth = wmsLayer.substr(7, 2);\n      let wmsLayerDay = wmsLayer.substr(9, 2);\n\n      let wmsLayerDate = wmsLayerMonth + \"/\" + wmsLayerDay + \"/\" + wmsLayerYear;\n      wmsLayerStrings[i] = wmsLayerDate;\n    }\n\n    let dateIndex = -1;\n    dateIndex = modisData.labels.indexOf(wmsLayerStrings[dateRangeIndex]);\n    return dateIndex;\n  }\n\n  function MapController () {\n    const search = geosearch()\n    const map = useMap()\n    setMap(map);\n    // Clear map utility\n    const clearMap = () => {\n      console.log(\"Clearing map...\")\n      //basemapRef.current.bringToBack()\n      map.eachLayer((layer) => {\n        if (basemapRef.current === layer) {\n//          console.log(\"Skipping basemap layer...\")\n//          console.log(basemapRef.current)\n          return\n        }\n        console.log(\"Removing layer: \")\n        console.log(layer)\n        map.removeLayer(layer)\n      })\n    }\n    //console.log(useCompare(basemapIndex));\n    // Hook: basemap change\n    useEffect(() => {\n      if(hasBaseMapChanged || isInitialRender){\n        console.log('basemap change hook')\n        if(basemapRef.current!=null){\n        map.removeLayer(basemapRef.current)\n        }\n        let oldBasemap = basemapRef.current\n        let newBasemap = basemaps[basemapIndex]\n        let leafletLayer = new L.tileLayer(newBasemap.url, {\n          opacity: 0,\n          attribution: newBasemap.attribution\n        })\n        //\n        map.addLayer(leafletLayer)\n        leafletLayer.bringToBack()\n        leafletLayer.setOpacity(1)\n        basemapRef.current = leafletLayer\n      }\n      if(hasBaseMapChanged && !isInitialRender){\n        return () => {\n          //map.removeLayer(basemapRef.current)\n        }\n      }\n    }, [hasBaseMapChanged, basemapIndex])\n\n    // Hook: product change\n    useEffect(() => {\n      if(hasProductIndexChanged || isInitialRender){\n        console.log(\"Product change hook\");\n        //console.log(newWMS);\n        clearMap()\n      }\n    }, [hasProductIndexChanged, productIndex])\n\n    // Hook: date range index change\n    useEffect(() => {\n      if(hasDateRangeIndexChanged || isInitialRender || hasProductIndexChanged){\n//        console.log(\"date range index hook\");\n        clearMap()\n        const layer = wmsLayers[dateRangeIndex]\n        console.log(\"new layer: \")\n        console.log(layer)\n        if (!map.hasLayer(layer.leafletLayer)) {\n          console.log(\"adding layer to the map...\")\n          map.addLayer(layer.leafletLayer)\n        }\n        layer.leafletLayer.bringToFront()\n        layer.leafletLayer.setOpacity(1)\n        if (animating) {\n          const newIndex = (dateRangeIndex+1) === wmsLayers.length ? 0 : dateRangeIndex+1\n          const timer = setTimeout(() => {\n            setDateRangeIndex(newIndex)\n          }, 10000)\n          return () => { if (timer) clearTimeout(timer) }\n        }\n        if(graphOn){\n          //chartLineValue();\n          let newLineValue = Object.assign({}, modisDataConfig);\n          newLineValue.plugins.annotation.annotations[0].value = getChartLineValue();\n          newLineValue.plugins.annotation.annotations[0].label.content = modisData.labels[dateRangeIndex];\n          setModisDataConfig(newLineValue);\n        }\n      }\n    }, [hasDateRangeIndexChanged, dateRangeIndex, productIndex])\n\n    // Hook: Animation button clicked - add all layers to the map\n    useEffect(() => {\n      if (!animating) { return }\n      wmsLayers.forEach(layer => {\n        layer.leafletLayer.setOpacity(0)\n        if (!map.hasLayer(layer.leafletLayer)) {\n          map.addLayer(layer.leafletLayer)\n        }\n      })\n    }, [animating])\n    // hook: has date range changed - update graph data range\n    useEffect(() => {\n      if(hasStartDateChanged || hasEndDateChanged){\n        if(graphOn){\n          getChartData(currentGraphCoords[1], currentGraphCoords[0])\n        }\n      }\n    }, [hasStartDateChanged, hasEndDateChanged, startDate, endDate])\n    //hook: different coordinates selected, update graph data\n    useEffect(() => {\n      if(hasGraphCoordsChanged){\n        if(graphOn){\n          getChartData(currentGraphCoords[1], currentGraphCoords[0])\n        }\n      }\n    }, [hasGraphCoordsChanged, currentGraphCoords])\n    if(isInitialRender){ //check if initilization is complete so we don't reinitilize components\n    search.addTo(map);\n    const legend = L.control({ position: \"bottomright\"});\n    legend.onAdd = () => {\n      const div = L.DomUtil.create(\"div\", \"info legend\");\n      div.innerHTML =\n      \"<img src=\" + forwarn2Legend + \"\" +\" width=\\\"128.5px\\\" height=\\\"210.5px\\\">\";\n      return div;\n    };\n    legend.addTo(map);\n\n    //create loading indicator\n    var leafletLoading = L.Control.loading({\n      separate: true,\n      //position: 'topcenter'\n    });\n    leafletLoading.addTo(map);\n  }\n\n\n  if(isInitialRender){\n    setIsInitialRender(false);\n  }\n\n  return null\n\n}\n\nfunction AnimateBtn (props) {\n\n  return (\n    <Button\n      letiant=\"contained\"\n      color=\"secondary\"\n      className={classes.button}\n      startIcon={ animating ? <StopIcon/> : <PlayArrowIcon />}\n      onClick={ () => { setAnimating(!animating) } }\n      >{ animating ? \"Stop\" : \"Play\" }\n    </Button>\n  )\n\n}\nfunction GraphBtn(props){\n\n  //const handleGraphClose = () => setGraphOn(false);\n  //getChartData(-78.65678578328217,35.45115625827913)\n  return(\n    <Button\n      letiant=\"contained\"\n      color=\"secondary\"\n      className={classes.button}\n      startIcon={ graphOn ? <StopIcon/> : <AssessmentIcon />}\n      onClick={handleGraphOpen}\n      >{ graphOn ? \"Hide Graph\" : \"Show Graph\" }\n    </Button>\n  )\n}\nfunction GraphWindow(){\n  /*\n  <Modal className ={classes.modal}\n    open={graphOn}\n    onClose={handleGraphOpen}\n    aria-labelledby=\"modal-modal-title\"\n    aria-describedby=\"modal-modal-description\"\n    >\n    <Box className={classes.paper}>\n      <Line data={modisData} options={modisDataConfig} />\n    </Box>\n  </Modal>\n  */\n  return(\n    <Grid item xs={12}>\n    { graphOn ? <GraphData /> : null }\n    </Grid>\n  )\n}\n\nconst GraphData = () =>(\n\n    <Box className={classes.paper}>\n      <Typography variant=\"h4\" align=\"center\"> MODIS NDVI {(modisData.coordinates[0]).toFixed(2) + ', ' + (modisData.coordinates[1]).toFixed(2)} </Typography>\n      <div style={{height:\"35vh\"}}>\n      <Line data={modisData} options={modisDataConfig} plugins={[]}/>\n      </div>\n    </Box>\n\n)\n\nfunction DateRangePicker () {\n  return (\n    <MuiPickersUtilsProvider utils={DateFnsUtils}>\n      <KeyboardDatePicker style={{marginRight: 16 }}\n      disableToolbar\n      letiant=\"inline\"\n      format=\"MM/dd/yyyy\"\n      margin=\"normal\"\n      id=\"date-picker-inline\"\n      label=\"Start Date\"\n      value={startDate}\n      onChange={onStartDateChange}\n      KeyboardButtonProps={{\n        'aria-label': 'change date',\n      }}\n    />\n    <div className={classes.root} style={{marginRight: 16, marginTop: 16 }}>\n      <Slider color=\"secondary\"\n        defaultValue={dateRangeIndex}\n        aria-labelledby=\"discrete-slider\"\n        valueLabelDisplay=\"auto\"\n        step={1}\n        marks\n        min={0}\n        max={wmsLayers.length-1}\n        onChangeCommitted={ onSliderChange }\n      />\n    </div>\n    <KeyboardDatePicker style={{marginRight: 16 }}\n      disableToolbar\n      letiant=\"inline\"\n      format=\"MM/dd/yyyy\"\n      margin=\"normal\"\n      id=\"date-picker-inline\"\n      label=\"End Date\"\n      value={endDate}\n      onChange={onEndDateChange}\n      KeyboardButtonProps={{\n        'aria-label': 'change date',\n      }}\n    />\n    </MuiPickersUtilsProvider>\n  )\n}\n\n\nfunction BasemapSelect () {\n\n  return (\n    <FormControl letiant=\"outlined\" style={{marginRight: 16 }}>\n      <InputLabel shrink id=\"demo-simple-select-placeholder-label-label\">\n        Basemap\n      </InputLabel>\n      <Select\n        labelId=\"fcav-basemap-select-label\"\n        id=\"fcav-basemap-select\"\n        value={basemapIndex}\n        onChange={onBasemapChange}\n        label=\"Product\"\n      >\n      {\n        basemaps.map((basemap, index) => (\n        <MenuItem key={index} value={index}>{basemap.name}</MenuItem>\n      ))\n    }\n    </Select>\n    </FormControl>\n  )\n}\nfunction ThemeSelect () {\n  // Hook: Theme change\n  useEffect(() => {\n    //console.log(newWMS);\n    let chosenTheme = themesList[themeIndex]\n    chosenTheme = chosenTheme.toLowerCase()\n//    console.log(\"chosen theme: \" + chosenTheme)\n    setTheme(chosenTheme)\n    if(chosenTheme === 'dark'){\n      setDarkMode(true);\n    }\n    else{\n      setDarkMode(false);\n    }\n  }, [themeIndex])\n  return (\n    <FormControl letiant=\"outlined\" style={{marginRight: 16 }}>\n      <InputLabel shrink id=\"demo-simple-select-placeholder-label-label\">\n      Theme\n      </InputLabel>\n      <Select\n        labelId=\"fcav-theme-select-label\"\n        id=\"fcav-theme-select\"\n        value={themeIndex}\n        onChange={onThemeChange}\n        label=\"Theme\"\n      >\n      {\n        themesList.map((theme, index) => (\n          <MenuItem key={index} value={index}>{theme}</MenuItem>\n        ))\n      }\n      </Select>\n    </FormControl>\n  )\n}\nfunction ProductSelect () {\n\n  return (\n    <FormControl letiant=\"outlined\" style={{marginRight: 16 }}>\n      <InputLabel shrink id=\"demo-simple-select-placeholder-label-label\">\n        Product\n      </InputLabel>\n      <Select\n        labelId=\"fcav-product-select-label\"\n        id=\"fcav-product-select\"\n        value={productIndex}\n        onChange={onProductChange}\n        label=\"Product\"\n      >\n        {\n          productsList.map((product, index) => (\n            <MenuItem key={index} value={index}>{product}</MenuItem>\n          ))\n        }\n      </Select>\n    </FormControl>\n  )\n}\n\nfunction TopBar () {\n  return (\n    //<ThemeProvider theme={fcavtheme}>\n    <Grid item xs={12}>\n      <AppBar\n      //id='menu'\n      position=\"static\"\n      style={{ zIndex: '0', flexWrap: 'flex', flexDirection: 'column'}}\n      >\n        <Toolbar>\n          <img src={ darkMode ? nemacLogoWhite : nemacLogoBlack} width=\"150\" alt=\"your mom\"></img>\n          <BasemapSelect/>\n          <DateRangePicker/>\n          <ProductSelect/>\n          <ThemeSelect/>\n          <GraphBtn/>\n        </Toolbar>\n      </AppBar>\n    </Grid>\n    //</ThemeProvider>\n  )\n}\n\n// App\nreturn (\n  <div>\n    <Grid container>\n      <TopBar/>\n      <Grid item xs={12}>\n        <MapContainer\n          className='mapContainer'\n          //loadingControl={true}\n          whenCreated={(map) => {\n              map.on(\"click\", function (e) {\n              const { lat, lng } = e.latlng;\n              setCurrentGraphCoords([lat,lng]);\n              //getChartData(lng, lat)\n            });\n          }}\n          center={center}\n          zoom={zoom}\n          style={{ height: mapHeight,\n          display: \"flex\"}}\n        >\n          <MapController />\n        </MapContainer>\n      </Grid>\n              <GraphWindow/>\n    </Grid>\n  </div>\n)\n\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"leaflet/dist/leaflet.css\";\nimport {App} from \"./fcav\";\n//import { ThemeProvider, createMuiTheme } from '@material-ui/core/styles';\nimport CustomThemeProvider from './CustomThemeProvider'\n\n/*export const theme = createMuiTheme({\n  overrides: {\n     MuiAppBar: {\n       colorPrimary: {\n         backgroundColor: \"#FFC0CB\" // Pink AppBar\n       }     }   },\n  palette: {\n    primary: {\n      main: \"#424242\",\n      backgroundColor: \"#424242\"\n    },\n    secondary: {\n      main: \"#e0e0e0\"\n    }\n  }\n});*/\nconst rootElement = document.getElementById(\"app\");\nReactDOM.render(\n  <CustomThemeProvider>\n    <App/>,\n    </CustomThemeProvider>,\n  rootElement\n);\n"],"sourceRoot":""}